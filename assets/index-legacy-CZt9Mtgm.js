System.register([],(function(e,t){"use strict";return{execute:function(){var e=document.createElement("style");e.textContent=':root{--clr-red: #ff646414;--clr-red-accent: #ff6464;--clr-red-text: #ffbcbc;--clr-green: #64ffa414;--clr-green-accent: #64ffa4;--clr-green-text: #bcffe2;--clr-gold: #ffcc6414;--clr-gold-accent: #ffcc64;--clr-gold-text: #ffe8bc}html{font-family:Satoshi,Inter,Segoe UI,Arial,sans-serif;color:#f0f0f0;min-height:100vh}body{margin:0;min-height:100vh;display:flex;justify-content:center;align-items:center;background-color:#121212;position:relative}body:before{content:"";top:0;right:0;bottom:0;left:0;position:absolute;z-index:-1;background-size:20px 20px;background-image:radial-gradient(#404040 1px,rgba(0,0,0,0) 0);-webkit-mask-image:radial-gradient(circle at center,rgb(0,0,0) 0%,rgba(0,0,0,0) 90%);mask-image:radial-gradient(circle at center,#000,rgba(0,0,0,0) 90%)}#app{display:grid;gap:2rem;padding:1rem;place-items:center}.header{margin:0;font-family:Satoshi,Inter,Segoe UI,Arial,sans-serif;font-size:2.5rem;font-weight:700;background:linear-gradient(45deg,#d0d8e0,#e4e9f1,#f1f4f8);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 1px 3px rgba(255,255,255,.2),0 0 25px rgba(255,255,255,.1)}.card-container{display:flex;flex-wrap:wrap;justify-content:center;gap:2rem;min-height:174px}.card{border:2.5px solid #444;color:#aaa;font:inherit;box-sizing:border-box;border-radius:16px;display:grid;padding:1.25rem;min-width:240px;min-height:180px;outline:rgba(0,0,0,0);-webkit-user-select:none;-moz-user-select:none;user-select:none;box-shadow:0 .25rem 1rem rgba(0,0,0,.33);opacity:1;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);transition:box-shadow 128ms ease,color 256ms ease,background-color 256ms ease,border-color 256ms ease;cursor:pointer;font-variant-numeric:tabular-nums}.card[data-state=best]{border-color:var(--clr-gold-accent);background-color:var(--clr-gold)}.card[data-state=best] .card-title,.card[data-state=best] .card-value,.card[data-state=best] .card-average-label{border-color:var(--clr-gold-accent);color:var(--clr-gold-text)}.card[data-state=positive]{border-color:var(--clr-green-accent);background-color:var(--clr-green)}.card[data-state=positive] .card-title,.card[data-state=positive] .card-value,.card[data-state=positive] .card-average-label{border-color:var(--clr-green-accent);color:var(--clr-green-text)}.card[data-state=negative]{border-color:var(--clr-red-accent);background-color:var(--clr-red)}.card[data-state=negative] .card-title,.card[data-state=negative] .card-value,.card[data-state=negative] .card-average-label{border-color:var(--clr-red-accent);color:var(--clr-red-text)}.card .card-header{display:grid;grid-template-columns:1fr 2fr 1fr;align-items:center;line-height:0}.card .card-icon{image-rendering:pixelated;background-size:96px 48px;height:24px;width:24px}.card:hover,.card:focus-visible,.card.card-focus{box-shadow:0 .5rem 1rem rgba(0,0,0,.33)}.card .card-title{font-size:1.125rem;font-weight:600}.card .card-status{justify-self:flex-end}.card .card-status[data-trend="1"]{color:var(--clr-green-text)}.card .card-status[data-trend="-1"]{color:var(--clr-red-text)}.card .card-value{padding:1.5rem;place-self:center;font-size:1.5rem;font-weight:700}.card .card-footer{display:flex;justify-content:space-between;align-items:center}.card .card-average-label{font-size:.75rem;font-weight:500;padding:.25rem .75rem;border:1px solid #444;border-radius:5px}.card .card-average{font-weight:500}.card .card-average[data-state=positive]{color:var(--clr-green-text)}.card .card-average[data-state=negative]{color:var(--clr-red-text)}.card-placeholder{background:repeating-linear-gradient(135deg,rgba(18,18,18,.33) 0,rgba(18,18,18,.33) 10px,rgba(24,24,24,.33) 10px,rgba(24,24,24,.33) 20px);border:2.5px dashed rgba(68,68,68,.33);box-shadow:none;min-width:240px;border-radius:16px;box-sizing:border-box;backdrop-filter:blur(6px)}.card-socket{min-width:240px;min-height:180px;box-sizing:border-box;border-radius:16px;display:grid;align-items:center;justify-items:center;display:flex;justify-content:center;margin:auto}.card-socket:empty{border:2.5px dashed rgba(69,69,69,.33);background:rgba(24,24,24,.33);-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}\n/*$vite$:1*/',document.head.appendChild(e);const t=e=>e.charAt(0).toUpperCase()+e.substring(1),a=Intl.NumberFormat(void 0,{minimumFractionDigits:2,minimumIntegerDigits:2,signDisplay:"always",style:"percent"});function r(e=Date.now()){return e/36e5}const n=e=>a.format(e);function i(e,t){e.textContent!==t&&(e.textContent=t)}function c(e,t,a){e.dataset[t]!==a&&(e.dataset[t]=a)}function s(e,t){const a=document.createElement(e);return t.classList&&(a.className=t.classList.join(" ")),t.classList&&(a.textContent=t.textContent),a}class o{static instances=[];static previousBest;static effectMagnitude=.15;id;angularFrequency;class;static lastNotificationTime=0;constructor(e,t){this.id=t,this.angularFrequency=2*Math.PI/e,this.class=this.constructor,o.instances.push(this)}static getBestInstance(e,t=r(),a=1){if(!this.instances.length)return;let n,i=0,c=0;for(const r of this.instances){const s=r===e,o=r.getCurrentEffect(t),d=r.getAverageEffect(a,t);(s?o>0:o>=0&&d>=0)&&(n?(s!==(n===e)?s:s?o>i||o===i&&d>c:d>c)&&(n=r,i=o,c=d):(n=r,i=o,c=d))}const s=n&&(n===e||c>1e-7)?n:void 0;return s!==this.previousBest&&(this.notifyBestChange(s,this.previousBest),this.previousBest=s),s}static getRankedInstances(e,t=r(),a=1){const n=this.instances.map((r=>{const n=r.getCurrentEffect(t),i=r.getAverageEffect(a,t),c=r.getEffectTrend(t);return{instance:r,currentEffect:n,averageEffect:i,effectTrend:c,isActive:r===e,rankWeight:0}}));return n.sort(((e,t)=>e.isActive!==t.isActive?e.isActive?-1:1:e.isActive&&t.currentEffect!==e.currentEffect?t.currentEffect-e.currentEffect:t.averageEffect-e.averageEffect)),n.forEach(((e,t)=>{e.rankWeight=n.length-1-t})),n.reduce(((e,t)=>(e[t.instance.id]={weight:t.rankWeight,current_effect:t.currentEffect,average_effect:t.averageEffect,trend:t.effectTrend},e)),{})}getSlope(e){return Math.cos(this.angularFrequency*e)}getCurrentEffect(e=r(Date.now())){return Math.sin(this.angularFrequency*e)*this.class.effectMagnitude}getAverageEffect(e=1,t=r(Date.now()),a=this.getSlope(t)){const n=t+e,i=this.getSlope(n)-a;return-this.class.effectMagnitude/this.angularFrequency*i/e}getEffectTrend(e=r(Date.now()),t=this.getSlope(e)){return Math.sign(t)}getEffectSnapshot({current:e,averageTimeWindow:t,trend:a},n=r(Date.now())){let i,c,s;const o=this.getSlope(n);return e&&(i=this.getCurrentEffect(n)),t&&(c=this.getAverageEffect(t,n,o)),a&&(s=this.getEffectTrend(n,o)),{currentEffect:i,averageEffect:c,effectTrend:s}}static sendNotification(e,a){const[r,i,c,s]=[t(a?.id||"none"),t(e?.id||"none"),n(e?.getCurrentEffect()||0),n(e?.getAverageEffect()||0)];new Notification(`${r} -> ${i}`,{body:`Current Effect: ${c}\nAverage Effect: ${s}`,icon:"./cyclius.webp"})}static notifyBestChange(e,t){const a=Date.now();a-this.lastNotificationTime<5e3||performance.now()<100||(this.lastNotificationTime=a,"granted"===Notification.permission&&"hidden"===document.visibilityState?this.sendNotification(e,t):Notification.requestPermission().then((a=>{"granted"===a&&"hidden"===document.visibilityState&&this.sendNotification(e,t)})))}static requestNotificationPermission(){"granted"!==Notification.permission&&Notification.requestPermission()}}class d{static instances=[];static active;static cardContainer=document.createElement("div");static socket=document.createElement("div");gemCycle;class;placeholder;el;static{this.socket.className="card-socket",this.cardContainer.className="card-container"}static setupDom(e=document.body){e.appendChild(this.socket),e.appendChild(this.cardContainer),this.instances.forEach((e=>{this.cardContainer.appendChild(e.element)}))}static updateElements(e=r()){const t=d.getBestInstance(d.active,e);this.instances.forEach((a=>a.updateElement(e,t)))}constructor(e,a,r){this.gemCycle=new o(e,a),d.instances.push(this),this.class=this.constructor,this.el=this.createCardElement(t(this.gemCycle.id),r),this.updateElement(),this.element.addEventListener("click",(()=>this.handleClick()))}handleClick(){try{const e=this.class.active;if(e===this)return this.restoreCard(),this.class.socket.innerHTML="",void(this.class.active=void 0);e&&(e.restoreCard(),e.element.dataset.active="false");const t=this.makePlaceholder();this.class.cardContainer.replaceChild(t,this.element),this.class.socket.innerHTML="",this.class.socket.appendChild(this.element),this.class.active=this,this.element.dataset.active="true"}catch(e){console.error("handleClick crash:",e)}}makePlaceholder(){const e=document.createElement("div"),t=this.element.getBoundingClientRect();return e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.className="card-placeholder",this.placeholder=e,e}restoreCard(){this.placeholder&&this.placeholder.parentNode&&(this.class.cardContainer.replaceChild(this.element,this.placeholder),this.placeholder=void 0)}get element(){return this.el}updateElement(e=r(),t=d.getBestInstance(d.active,e)){const{currentEffect:a,averageEffect:s,effectTrend:o}=this.gemCycle.getEffectSnapshot({current:!0,averageTimeWindow:1,trend:!0},e);if(void 0===a||void 0===s||void 0===o)return;const l=t&&t===this?"best":a>0?"positive":"negative";this.element.dataset.state=l;const g=this.el.querySelector('[data-part="value"]'),f=this.el.querySelector('[data-part="average"]'),h=this.el.querySelector('[data-part="trend"]');c(h,"trend",o.toString()),c(f,"state",s>0?"positive":"negative"),i(g,n(a)),i(f,n(s)),i(h,((e,t="▲",a="▼",r="—")=>e>0?t:e<0?a:r)(o))}destroy(){this===d.active&&(d.socket.innerHTML="",d.active=void 0),this.el.remove(),d.instances=d.instances.filter((e=>e!==this))}createCardElement(e,t){const a=document.createElement("button");return a.className="card",a.innerHTML=` \n      <div class="card-header">\n        ${t?`<div class="card-icon" style="${function(e){return`background-position:-${12*e[0]}px ${12*e[1]}px;`+(e[2]?`background-image:url('${e[2]}');`:"")}(t)}"></div>`:""}\n        <span class="card-title">${e}</span>\n        <span class="card-status" data-part="trend"></span>\n      </div>\n      <span class="card-value" data-part="value"></span>\n      <div class="card-footer">\n        <span class="card-average-label">1h</span>\n        <span class="card-average" data-part="average"></span>\n      </div>\n    `,a}static getBestInstance(e,t=r(),a=1){const n=o.getBestInstance(e?.gemCycle,t,a);return this.instances.find((e=>e.gemCycle===n))}}const l="data:image/webp;base64,UklGRj4CAABXRUJQVlA4TDECAAAvL8AFEAfBprb2Jl96MRABmTKFJpYNJZhAAIe1b73aYBvZtpL7/8fdUg9pwRunCzKGBiBzB7aRbSt587P/cYeIIfYWvABqoDNqIqMEdweDbCMV7ZAO8RDe6AMA//+/VDEAptIrq80KkgSAAXCH37RNRvAqXU35ItPyB+yQcHamFGr8z60wsMxW9yvWtJrtFTtFwSG9oygk5L5C6ag7p1LVWrxVgARJkqRGopkCNjWNLnSkKlXS/P+Z0M3q+EBE/xm4bdtIjs/J7fWKZlY/q/mk+pRzKqqvNaxgBpDkGm3OMaai2uP1ep2mY6oxoyIrZydXfM+6pf1S7WXadN01HSuMEVK4FNlZetm636dZw8zmOPfXaagtEQDoikCZ420f9/1tzDNTN103x67ESBdAkADlGQWhfY69ouJynbrrUFhBUA4nCUY4lmEclyHnNLO9bKfpuKkIAWaivLiOqjiMuuV77puZdOm6zbRgcIFKMropifDwssYYc26Ll76dF5fLcShmEeHJKAtPZaycZHHzU+tfMdPNfwMU4teNWKhvr/m/DA7CDMYwmIGg0LwhY0BBdyjgzhyIXNH3r6HiIvbHLHiYQ1HSPqJ/hacHBcmexbECJavIr0HBBbjBAREKWulTej1cDgAuhxR1ntNr8UcnXIoIObiaM/FaWQThpBdbuZKPtMSLrYIApVDt3Wl3PkeK4bV60hUeclZu2rR7PE6nSC/R2Nw8CZJWeP1nffn3qtR8Sw0A";function g(){const e=document.getElementById("app")||document.body;e&&(e.appendChild(s("h1",{textContent:"Chronosight",classList:["header"]})),d.setupDom(e))}new d(3,"diamond",[0,0,l]),new d(12,"ruby",[2,0,l]),new d(24,"jade",[0,2,l]),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",g):g(),function e(){try{d.updateElements()}catch(t){console.error("UpdateElements crash:",t)}"function"==typeof requestAnimationFrame?requestAnimationFrame(e):setTimeout(e,100)}();try{"Notification"in window&&o.requestNotificationPermission()}catch(f){document.body.prepend(s("h1",{textContent:String(f),classList:["error"]}))}}}}));
