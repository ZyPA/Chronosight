System.register([],(function(e,t){"use strict";return{execute:function(){var e=document.createElement("style");e.textContent=':root{--clr-red: #ff646414;--clr-red-accent: #ff6464;--clr-red-text: #ffbcbc;--clr-green: #64ffa414;--clr-green-accent: #64ffa4;--clr-green-text: #bcffe2;--clr-gold: #ffcc6414;--clr-gold-accent: #ffcc64;--clr-gold-text: #ffe8bc}html{font-family:Satoshi,Inter,Segoe UI,Arial,sans-serif;color:#f0f0f0;min-height:100vh}body{margin:0;min-height:100vh;display:flex;justify-content:center;align-items:center;background-color:#121212;position:relative}body:before{content:"";top:0;right:0;bottom:0;left:0;position:absolute;z-index:-1;background-size:20px 20px;background-image:radial-gradient(#404040 1px,rgba(0,0,0,0) 0);-webkit-mask-image:radial-gradient(circle at center,rgb(0,0,0) 0%,rgba(0,0,0,0) 90%);mask-image:radial-gradient(circle at center,#000,rgba(0,0,0,0) 90%)}#app{display:grid;gap:2rem;padding:1rem;place-items:center}.header{margin:0;font-family:Satoshi,Inter,Segoe UI,Arial,sans-serif;font-size:2.5rem;font-weight:700;background:linear-gradient(45deg,#d0d8e0,#e4e9f1,#f1f4f8);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 1px 3px rgba(255,255,255,.2),0 0 25px rgba(255,255,255,.1)}.card-container{display:flex;flex-wrap:wrap;justify-content:center;gap:2rem;min-height:174px}.card{border:2.5px solid #444;color:#aaa;font:inherit;box-sizing:border-box;border-radius:16px;display:grid;padding:1.25rem;min-width:240px;min-height:180px;outline:rgba(0,0,0,0);-webkit-user-select:none;-moz-user-select:none;user-select:none;box-shadow:0 .25rem 1rem rgba(0,0,0,.33);opacity:1;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);transition:box-shadow 128ms ease,color 256ms ease,background-color 256ms ease,border-color 256ms ease;cursor:pointer;font-variant-numeric:tabular-nums}.card[data-state=best]{border-color:var(--clr-gold-accent);background-color:var(--clr-gold)}.card[data-state=best] .card-title,.card[data-state=best] .card-value,.card[data-state=best] .card-average-label{border-color:var(--clr-gold-accent);color:var(--clr-gold-text)}.card[data-state=positive]{border-color:var(--clr-green-accent);background-color:var(--clr-green)}.card[data-state=positive] .card-title,.card[data-state=positive] .card-value,.card[data-state=positive] .card-average-label{border-color:var(--clr-green-accent);color:var(--clr-green-text)}.card[data-state=negative]{border-color:var(--clr-red-accent);background-color:var(--clr-red)}.card[data-state=negative] .card-title,.card[data-state=negative] .card-value,.card[data-state=negative] .card-average-label{border-color:var(--clr-red-accent);color:var(--clr-red-text)}.card .card-header{display:grid;grid-template-columns:1fr 2fr 1fr;align-items:center;line-height:0}.card .card-icon{image-rendering:pixelated;background-size:96px 48px;height:24px;width:24px}.card:hover,.card:focus-visible,.card.card-focus{box-shadow:0 .5rem 1rem rgba(0,0,0,.33)}.card .card-title{font-size:1.125rem;font-weight:600}.card .card-status{justify-self:flex-end}.card .card-status[data-trend="1"]{color:var(--clr-green-text)}.card .card-status[data-trend="-1"]{color:var(--clr-red-text)}.card .card-value{padding:1.5rem;place-self:center;font-size:1.5rem;font-weight:700}.card .card-footer{display:flex;justify-content:space-between;align-items:center}.card .card-average-label{font-size:.75rem;font-weight:500;padding:.25rem .75rem;border:1px solid #444;border-radius:5px}.card .card-average{font-weight:500}.card .card-average[data-state=positive]{color:var(--clr-green-text)}.card .card-average[data-state=negative]{color:var(--clr-red-text)}.card-placeholder{background:repeating-linear-gradient(135deg,rgba(18,18,18,.33) 0,rgba(18,18,18,.33) 10px,rgba(24,24,24,.33) 10px,rgba(24,24,24,.33) 20px);border:2.5px dashed rgba(68,68,68,.33);box-shadow:none;min-width:240px;border-radius:16px;box-sizing:border-box;backdrop-filter:blur(6px)}.card-socket{min-width:240px;min-height:180px;box-sizing:border-box;border-radius:16px;display:grid;align-items:center;justify-items:center;display:flex;justify-content:center;margin:auto}.card-socket:empty{border:2.5px dashed rgba(69,69,69,.33);background:rgba(24,24,24,.33);-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}\n/*$vite$:1*/',document.head.appendChild(e);const t=Intl.NumberFormat(void 0,{minimumFractionDigits:2,minimumIntegerDigits:2,signDisplay:"always",style:"percent"});function a(e=Date.now()){return e/36e5}const r=e=>t.format(e);function c(e,t){e.textContent!==t&&(e.textContent=t)}function n(e,t,a){e.dataset[t]!==a&&(e.dataset[t]=a)}class i{static instances=[];static previousBest;static effectMagnitude=.15;id;angularFrequency;class;static lastNotificationTime=0;constructor(e,t){this.id=t,this.angularFrequency=2*Math.PI/e,this.class=this.constructor,i.instances.push(this)}static getBestInstance(e,t=a(),r=1){if(!this.instances.length)return;let c,n=0,i=0;for(const a of this.instances){const s=a===e,o=a.getCurrentEffect(t),d=a.getAverageEffect(r,t);(s?o>0:o>=0&&d>=0)&&(c?(s!==(c===e)?s:s?o>n||o===n&&d>i:d>i)&&(c=a,n=o,i=d):(c=a,n=o,i=d))}const s=c===e,o=i>1e-7;return c&&c!==this.previousBest&&(this.previousBest=c,this.notifyBestChange(c)),c&&(s||o)?c:void 0}static getRankedInstances(e,t=a(),r=1){const c=this.instances.map((a=>{const c=a.getCurrentEffect(t),n=a.getAverageEffect(r,t),i=a.getEffectTrend(t);return{instance:a,currentEffect:c,averageEffect:n,effectTrend:i,isActive:a===e,rankWeight:0}}));return c.sort(((e,t)=>e.isActive!==t.isActive?e.isActive?-1:1:e.isActive&&t.currentEffect!==e.currentEffect?t.currentEffect-e.currentEffect:t.averageEffect-e.averageEffect)),c.forEach(((e,t)=>{e.rankWeight=c.length-1-t})),c.reduce(((e,t)=>(e[t.instance.id]={weight:t.rankWeight,current_effect:t.currentEffect,average_effect:t.averageEffect,trend:t.effectTrend},e)),{})}getSlope(e){return Math.cos(this.angularFrequency*e)}getCurrentEffect(e=a(Date.now())){return Math.sin(this.angularFrequency*e)*this.class.effectMagnitude}getAverageEffect(e=1,t=a(Date.now()),r=this.getSlope(t)){const c=t+e,n=this.getSlope(c)-r;return-this.class.effectMagnitude/this.angularFrequency*n/e}getEffectTrend(e=a(Date.now()),t=this.getSlope(e)){return Math.sign(t)}getEffectSnapshot({current:e,averageTimeWindow:t,trend:r},c=a(Date.now())){let n,i,s;const o=this.getSlope(c);return e&&(n=this.getCurrentEffect(c)),t&&(i=this.getAverageEffect(t,c,o)),r&&(s=this.getEffectTrend(c,o)),{currentEffect:n,averageEffect:i,effectTrend:s}}static notifyBestChange(e){const t=Date.now();t-this.lastNotificationTime<5e3||(this.lastNotificationTime=t,"granted"===Notification.permission&&"hidden"===document.visibilityState&&new Notification(`New Best: ${e.id}`,{body:`Current Effect: ${r(e.getCurrentEffect())} | Average Effect: ${r(e.getAverageEffect())}`,icon:"./cyclius.webp"}))}static requestNotificationPermission(){"granted"!==Notification.permission&&Notification.requestPermission()}}class s{static instances=[];static active;static cardContainer=document.createElement("div");static socket=document.createElement("div");gemCycle;class;placeholder;el;static{this.socket.className="card-socket",this.cardContainer.className="card-container"}static setupDom(e=document.body){e.appendChild(this.socket),e.appendChild(this.cardContainer),this.instances.forEach((e=>{this.cardContainer.appendChild(e.element)}))}static updateElements(e=a()){const t=s.getBestInstance(s.active,e);this.instances.forEach((a=>a.updateElement(e,t)))}constructor(e,t,a){var r;this.gemCycle=new i(e,t),s.instances.push(this),this.class=this.constructor,this.el=this.createCardElement((r=this.gemCycle.id).charAt(0).toUpperCase()+r.substring(1),a),this.updateElement(),this.element.addEventListener("click",(()=>this.handleClick()))}handleClick(){const e=this.class.active;if(e&&e===this)return this.restoreCard(),this.class.socket.innerHTML="",void(this.class.active=void 0);e&&(e.restoreCard(),e.element.dataset.active="false");const t=this.makePlaceholder();this.class.cardContainer.replaceChild(t,this.element),this.class.socket.innerHTML="",this.class.socket.appendChild(this.element),this.class.active=this,this.element.dataset.active="true"}makePlaceholder(){const e=document.createElement("div"),t=this.element.getBoundingClientRect();return e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.className="card-placeholder",this.placeholder=e,e}restoreCard(){this.placeholder&&this.class.cardContainer.replaceChild(this.element,this.placeholder)}get element(){return this.el}updateElement(e=a(),t=s.getBestInstance(s.active,e)){const{currentEffect:i,averageEffect:o,effectTrend:d}=this.gemCycle.getEffectSnapshot({current:!0,averageTimeWindow:1,trend:!0},e);if(!(i&&o&&d))return;const l=t&&t===this?"best":i>0?"positive":"negative";this.element.dataset.state=l;const g=this.el.querySelector('[data-part="value"]'),f=this.el.querySelector('[data-part="average"]'),h=this.el.querySelector('[data-part="trend"]');n(h,"trend",d.toString()),n(f,"state",o>0?"positive":"negative"),c(g,r(i)),c(f,r(o)),c(h,((e,t="▲",a="▼",r="—")=>e>0?t:e<0?a:r)(d))}destroy(){this===s.active&&(s.socket.innerHTML="",s.active=void 0),this.el.remove(),s.instances=s.instances.filter((e=>e!==this))}createCardElement(e,t){const a=document.createElement("button");return a.className="card",a.innerHTML=` \n      <div class="card-header">\n        ${t?`<div class="card-icon" style="${function(e){return`background-position:-${12*e[0]}px ${12*e[1]}px;`+(e[2]?`background-image:url('${e[2]}');`:"")}(t)}"></div>`:""}\n        <span class="card-title">${e}</span>\n        <span class="card-status" data-part="trend"></span>\n      </div>\n      <span class="card-value" data-part="value"></span>\n      <div class="card-footer">\n        <span class="card-average-label">1h</span>\n        <span class="card-average" data-part="average"></span>\n      </div>\n    `,a}static getBestInstance(e,t=a(),r=1){const c=i.getBestInstance(e?.gemCycle,t,r);return this.instances.find((e=>e.gemCycle===c))}}const o="data:image/webp;base64,UklGRj4CAABXRUJQVlA4TDECAAAvL8AFEAfBprb2Jl96MRABmTKFJpYNJZhAAIe1b73aYBvZtpL7/8fdUg9pwRunCzKGBiBzB7aRbSt587P/cYeIIfYWvABqoDNqIqMEdweDbCMV7ZAO8RDe6AMA//+/VDEAptIrq80KkgSAAXCH37RNRvAqXU35ItPyB+yQcHamFGr8z60wsMxW9yvWtJrtFTtFwSG9oygk5L5C6ag7p1LVWrxVgARJkqRGopkCNjWNLnSkKlXS/P+Z0M3q+EBE/xm4bdtIjs/J7fWKZlY/q/mk+pRzKqqvNaxgBpDkGm3OMaai2uP1ep2mY6oxoyIrZydXfM+6pf1S7WXadN01HSuMEVK4FNlZetm636dZw8zmOPfXaagtEQDoikCZ420f9/1tzDNTN103x67ESBdAkADlGQWhfY69ouJynbrrUFhBUA4nCUY4lmEclyHnNLO9bKfpuKkIAWaivLiOqjiMuuV77puZdOm6zbRgcIFKMropifDwssYYc26Ll76dF5fLcShmEeHJKAtPZaycZHHzU+tfMdPNfwMU4teNWKhvr/m/DA7CDMYwmIGg0LwhY0BBdyjgzhyIXNH3r6HiIvbHLHiYQ1HSPqJ/hacHBcmexbECJavIr0HBBbjBAREKWulTej1cDgAuhxR1ntNr8UcnXIoIObiaM/FaWQThpBdbuZKPtMSLrYIApVDt3Wl3PkeK4bV60hUeclZu2rR7PE6nSC/R2Nw8CZJWeP1nffn3qtR8Sw0A",d=document.getElementById("app")||document.body;new s(3,"diamond",[0,0,o]),new s(12,"ruby",[2,0,o]),new s(24,"jade",[0,2,o]);const l=document.createElement("h1");l.className="header",l.textContent="Chronosight",d.appendChild(l),s.setupDom(d);try{"Notification"in window&&i.requestNotificationPermission()}catch{console.error("Notifications aren't working.")}!function e(){return s.updateElements(),"function"==typeof requestIdleCallback?requestIdleCallback(e,{timeout:100}):"function"==typeof requestAnimationFrame?requestAnimationFrame(e):void setTimeout(e,100)}()}}}));
